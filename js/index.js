var imgTotal=$("#preloadImg img").length;var loadCount=0;$("#preloadImg").imagesLoaded().done(function(instance){$("#loading").hide()}).progress(function(instance,image){loadCount++;$(".word").html(parseInt(loadCount/imgTotal*100)+"%")});$(function(){function gameOutTime(){$(".gameOutTime").show()}$("audio")[0].play();$(".music").click(function(){if($(this).hasClass("audio")){$(this).removeClass("audio");$("audio")[0].play()}else{$(this).addClass("audio");$("audio")[0].pause()}});FastClick.attach(document.body);config={"row":6,"col":6,"iconType":18,"blockStyle":{"width":"125px","height":"125px",},"imgStyle":{"width":"110px","height":"110px"},"spanStyle":{"width":"21px","height":"21px"},"icons":TabImg(),"url":"","count":5};function TabImg(){var arr=[{"src":"img/three/1.png","count":88,"name":"青龙报喜"},{"src":"img/three/2.png","count":88,"name":"玄武添瑞"},{"src":"img/three/3.png","count":10,"name":"焕然一新"},{"src":"img/three/4.png","count":10,"name":"健康呼吸"},{"src":"img/three/5.png","count":10,"name":"除旧迎新"},{"src":"img/three/6.png","count":10,"name":"风度翩翩"},{"src":"img/three/7.png","count":10,"name":"健康护齿"},{"src":"img/three/8.png","count":10,"name":"美丽怡人"},{"src":"img/three/9.png","count":10,"name":"潇洒自信"},{"src":"img/three/10.png","count":10,"name":"蒸蒸日上"},{"src":"img/three/11.png","count":10,"name":"精力充沛"},{"src":"img/three/12.png","count":10,"name":"神采飞扬"},{"src":"img/three/13.png","count":10,"name":"无油美味"},{"src":"img/three/14.png","count":10,"name":"魅力成双"},{"src":"img/three/15.png","count":58,"name":"猴年大吉"},{"src":"img/three/16.png","count":0,"addTime":5,"name":"福禄安康"},{"src":"img/three/17.png","count":88,"name":"白虎佑福"},{"src":"img/three/18.png","count":88,"name":"朱雀呈祥"}];var arr1=choseArray();var myArr=[];for(var i=0;i<arr1.length;i++){myArr.push(arr[arr1[i]])}console.log(myArr);return myArr}$("#restart").click(function(){clearTimeout(timer11);$(".break").hide();timer11=setTimeout(function(){$(".break").show()},3000);var aParent=$("#container img").parent();var arr=[];aParent.each(function(index){arr.push({_index:$(this).attr("data-index"),url:$("#container img").eq(index).attr("src")})});arr=shuffleArray(arr);aParent.each(function(index){$(this).attr("data-index",arr[index]._index);$(this).find("img").attr("src",arr[index].url)})});function choseArray(){var arr=[];var arr1=[0,1,14,15,16,17];var arr2=[2,3,4,5,6,7,8,9,10,11,12,13];arr1=shuffleArray(arr1);arr2=shuffleArray(arr2);for(var i=0;i<4;i++){arr.push(arr1[i]);arr.push(arr2[i])}return arr}function shuffleArray(arr){var len=arr.length;var newArr=[];for(var i=0;i<len;i++){var index=Math.floor(Math.random()*arr.length);newArr.push(arr[index]);arr.splice(index,1)}return newArr}var h=document.documentElement.clientHeight;document.body.style.height=h+"px";var oStart=document.getElementById("start"),oDetal=document.getElementById("details"),oStpage=document.getElementById("starpage"),oDetail=document.getElementById("details_date"),oCodown=document.getElementById("countdown"),oTime=document.getElementById("time"),oAga=document.getElementById("again"),oAgaBtn=document.getElementById("again_btn"),oFill=document.getElementById("fillin"),oInfo=document.getElementById("Information"),oAgatwo=document.getElementById("again_two"),oAgaInbtn=document.getElementById("again_info_btn"),oRank=document.getElementById("ranking"),oAgatre=document.getElementById("again_three"),oAllscore=document.getElementById("allscore"),oGift=document.getElementById("gift"),oScore=document.getElementById("score"),oLantern=document.getElementById("lantern"),oPanghang=document.getElementById("paihang"),oSetRnk=document.getElementById("setRnk"),oHuojiangbtn=document.getElementById("huojiang_btn"),oPagaBtn=document.getElementById("prize_again_btn"),oOneRnk=document.getElementById("det_pai_btn"),oLastRnk=document.getElementById("prize_paihang_btn"),oError=document.getElementById("error"),oSeeRank=document.getElementById("seeranking"),oCont=document.getElementById("cont"),oEnGame=document.getElementById("enter_game"),oRder=document.getElementById("enter_order"),oTotal=document.getElementById("total"),Num=["一","二","三","四","五","六","七"],userScore=0,tel="",ready=true,timer=null,timer1=null,now=4,count=60,oEmail=document.getElementById("email"),oName=document.getElementById("name_per"),oMob=document.getElementById("mobile"),oJob=document.getElementById("jobnum"),oE=oEmail.value;oEnGame.onclick=function(){oCont.style.display="none";oTotal.style.display="block";$(".event").show()};var rankPageName;function showRank(pagename){rankPageName=pagename;if(pagename=="home"){$("#again_three").hide();$("#btnBack").show();$("#btnBackRule").hide();$("#starGame_btn").hide();oCont.style.display="none";oTotal.style.display="block"}else{if(pagename=="info"){oFill.style.display="none";$("#again_three").show();$("#btnBack").hide();$("#btnBackRule").hide();$("#starGame_btn").hide()}else{if(pagename=="rule"){$("#again_three").hide();$("#btnBack").hide();$("#btnBackRule").hide();$("#starGame_btn").show()}else{if(pagename=="gameover"){$("#again_three").show();
$("#btnBack").hide();$("#btnBackRule").hide();$("#starGame_btn").hide()}}}}oRank.style.display="block";$("#paihang").html("");console.log(data.info);var len=data.info.length>=7?7:data.info.length;for(var i=0;i<len;i++){$("#paihang").append("<li><i>第"+Num[i]+'名</i><span class="ran_name">'+data.info[i].username+'</span><span class="ran_score">'+data.info[i].score+'</span><em>分</em><img class="xian" src="img/two/xian.png" alt=""></li>')}}oRder.onclick=function(){showRank("home");$(".event").hide()};oStart.onclick=function(){oStart.style.display="none";oDetail.style.display="none";oCodown.style.display="block";$(".det_pai_btn").hide();$(".autoplay").show();CountDown()};$(".wangqi").click(function(){$(this).attr("href","winnerslist.html")});oAgaBtn.onclick=function(){oScore.innerHTML=0;oAga.style.display="none";$(".det_pai_btn").show();$(".Information").hide();dot2dot.init(config);dot2dot.clearScore();oGift.style.zIndex=-5;oLantern.style.zIndex=1;$(".event").show();$(".show").hide().removeClass("fadeOutUp")};oInfo.onclick=function(){oAga.style.display="none";oFill.style.display="block"};function showInfoError(msg){oError.innerHTML=msg}function chkName(){var len=oName.value.length;if(len<=0||len>12){return false}return true}function chkEmail(){var re=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!re.test(oEmail.value)){return false}return true}function chkMobile(){var re=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(!re.test(oMob.value)){return false}return true}function chkJob(){if(oJob.value==""){return false}return true}oAgatwo.onclick=function(){if(!chkMobile(oMob.value)){showInfoError("请输入正确的手机号码");return}if(!chkEmail(oEmail.value)){showInfoError("请输入正确的邮箱地址");return}if(!chkName(oName.value)){showInfoError("姓名不能为空或大于12字符");return}if(!chkJob(oJob.value)){showInfoError("请填写员工号");return}dot2dot.init(config);if(ready){ready=false;tel=oMob.value;showRank("info")}};oOneRnk.onclick=function(){showRank("rule");$(".event").hide()};oSeeRank.onclick=function(){showRank("gameover");$(".autoplay").hide()};$("#prize_starGame_btn").on("click",function(){gameOutTime();$(".prize_person").hide();$(".event").show();oStart.style.display="none";oDetail.style.display="none";oCodown.style.display="block";$(".det_pai_btn").hide();CountDown()});oHuojiangbtn.onclick=function(){if(rankPageName=="home"){$("#prize_again_btn").hide();$("#prize_backRule_btn").hide();$("#prize_back_btn").show();$("#prize_starGame_btn").hide()}else{if(rankPageName=="info"){$("#prize_again_btn").show();$("#prize_backRule_btn").hide();$("#prize_back_btn").hide();$("#prize_starGame_btn").hide()}else{if(rankPageName=="rule"){$("#prize_again_btn").hide();$("#prize_backRule_btn").hide();$("#prize_back_btn").hide();$("#prize_starGame_btn").show()}else{if(rankPageName=="gameover"){$("#prize_again_btn").show();$("#prize_backRule_btn").hide();$("#prize_back_btn").hide();$("#prize_starGame_btn").hide()}}}}oRank.style.display="none";$(".prize_person").show();$(".new_time").show()};oPagaBtn.onclick=function(){$(".prize_person").hide();initGame();$(".event").show();$(".show").hide().removeClass("fadeOutUp")};function initGame(){oScore.innerHTML=0;oAga.style.display="none";dot2dot.init(config);dot2dot.clearScore();oGift.style.zIndex=-5;oRank.style.display="none";oLantern.style.zIndex=10;$(".det_pai_btn").show()}oAgatre.onclick=function(){initGame();$(".event").show();$(".show").hide().removeClass("fadeOutUp")};$("#btnBack").on("click",function(){trackBaidu("返回首页");$("#ranking").hide();$("#total").hide();$("#cont").show()});$("#btnBackRule").on("click",function(){$("#ranking").hide();$(".event").show()});$("#prize_back_btn").on("click",function(){trackBaidu("返回首页");$(".prize_person").hide();$("#total").hide();$("#cont").show()});$("#prize_backRule_btn").on("click",function(){$(".prize_person").hide();$(".event").show()});$("#starGame_btn").click(function(){trackBaidu("开始游戏");gameOutTime();initGame();$(".event").show();$(".show").hide().removeClass("fadeOutUp");$(".prize_person").hide();oStart.style.display="none";oDetail.style.display="none";oCodown.style.display="block";$(".det_pai_btn").hide();CountDown()});function gameLoad(){oCodown.src="img/two/4.png";oCodown.style.display="none";oDetal.style.display="block";oDetail.style.display="block";oStart.style.display="block";$(".autoplay").show();$(".event").hide();now=4;count=60;oTime.innerHTML=count}$(oSetRnk).click(function(){oFill.style.display="none";oRank.style.display="block";$("#paihang").html("");var len=data.info.length>=7?7:data.info.length;for(var i=0;i<len;i++){$("#paihang").append("<li><i>第"+Num[i]+'名</i><span class="ran_name">'+data.info[i].username+'</span><span class="ran_score">'+data.info[i].score+'</span><em>分</em><img class="xian2" src="img/two/xian.png" alt=""></li>')}});function CountDown(){timer=setInterval(function(){now--;if(now==0){now=1;clearInterval(timer);oDetal.style.display="none";oGift.style.zIndex=-5;oLantern.style.zIndex=1;dot2dot.init(config);
dot2dot.clearScore();timer1=setInterval(function(){count--;count+=game.getAddTime();oTime.innerHTML=count;if(count==-1){overGame=0;clearInterval(timer1);if(Cookies.get("tel2")){tel=Cookies.get("tel2");oAga.style.display="block";oSeeRank.style.display="block";oGift.style.zIndex=3;oLantern.style.zIndex=3;oAllscore.innerHTML=oScore.innerHTML+"分";userScore=oScore.innerHTML;console.log(userScore);gameLoad()}else{oAga.style.display="block";oInfo.style.display="block";oGift.style.zIndex=3;oLantern.style.zIndex=3;oAllscore.innerHTML=oScore.innerHTML+"分";userScore=oScore.innerHTML;gameLoad()}shareData.desc="我获得了"+userScore+"分，赶紧来比";oAga.style.display="block";oInfo.style.display="block";oGift.style.zIndex=3;oLantern.style.zIndex=3;oAllscore.innerHTML=oScore.innerHTML+"分";userScore=oScore.innerHTML}},1000)}oCodown.src="img/two/"+now+".png"},1000)}});